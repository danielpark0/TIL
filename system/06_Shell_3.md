# 리눅스 파일 시스템

## - 모든 것은 파일이라는 철학을 따름

- 모든 인터렉션은 파일을 읽고, 쓰는 것처럼 이루어져 있음
- 마우스, 키보드와 같은 모든 디바이스 관련된 기술도 파일과 깉이 다루어짐
- 모든 자원에 대한 추상화 인터페이스로 파일 인터페이스를 활용

## 가상 파일 시스템

- 파일 네임스페이스
  - 전역 네임스페이스 사용

## 슈퍼블록, inode와 파일

- 슈퍼블록 : 파일 시스템의 정보
- 파일 : inode 고유값과 자료구조에 의해 주요 정보 관리
  - '파일이름:inode' 로 파일 이름은 inode 번호와 매칭
  - 파일 시스템에서는 inode를 기반으로 파일 엑세스
  - inode 기반 메타 데이터 저장

## 리눅스 파일 시스템(ext file system)과 inode

- inode 기반 메타 데이터 (파일 권한, 소유자 정보, 파일 사이즈, 생성 시간 등 시간 관련 정보, 데이터 저장 위치등) 저장
- ext 알고리즘을 사용한 파일 시스템을 사용

## 파일과 inode

- 리눅스 파일 탐색 : 예 - /home/ubuntu/link.txt
  1. 각 디렉토리 엔트리(dentry)를 탐색
     - 각 엔트리는 해당 디렉토리 파일/디렉토리 정보를 가지고 있음
  2. '/' dentry에서 'home'을 찾고, 'home'에서 'ubuntu'를 찾고, 'ubuntu'에서 link.txt 파일 이름에 해당하는 inode를 얻음

## 하드 링크와 소프트 링크

- cp 명령 : 파일 복사
  - 1MB 사이즈를 가지고 있는 A 파일을 B 파일로 복사
    - cp A B -> A와 B는 각각 물리적으로 10MB 파일로 저장
- 하드 링크 : ln A B
  - A와 B는 동일한 10MB 파일을 가리킴
  - 즉, 동일한 파일을 가진 이름을 하나 더 만든 것일 뿐
    - 그래서 inode는 동일
    - 전체 파일 용량은 달라지지 않음
  - rm A로 A를 삭제하면? B는 그래도 해당 파일 접근 가능
    - 'A: 해당 inode'이 정보만 삭제되고, inode를 가진 실제 파일은 그대로 남음
- 소프트(심볼릭) 링크 : ln -s A B
  - Windows OS의 바로가기와 동일
  - ls -al 하면, 소프트 링크 확인 가능
  - inode 값이 다름
  - rm A로 A를 삭제하면? B는 해당 파일 접근 불가

## 특수파일

- 디바이스
  - 블록 디바이스(Block Device)
    : HDD, CD/DVD와 같이 블록 또는 섹터 등 정해진 단위로 데이터 전송, IO 송수신 속도가 높음
  - 캐릭터 디바이스(Character Device)
    : 키보드, 마우스 등 byte 단위 데이터 전송, IO 송수신 속도가 낮음